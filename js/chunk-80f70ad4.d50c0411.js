(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80f70ad4"],{"5dd0":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ion-page"},[n("ion-header",[n("ion-toolbar",[n("ion-title",[e._v("Reserve Table")]),n("ion-buttons",{attrs:{slot:"start"},slot:"start"},[n("ion-button",{on:{click:e.backToPubDetails}},[n("ion-icon",{attrs:{src:e.i.arrowBack}})],1)],1)],1)],1),n("ion-content",{staticClass:"ion-padding"},[n("ion-grid",[n("ion-row",{staticClass:"ion-justify-content-center"},[n("ion-col",{attrs:{size:"12","size-sm":"8","size-md":"6","size-xl":"4"}},[n("form",{on:{submit:function(t){return t.preventDefault(),e.reserve(t)}}},[n("ion-item",{attrs:{lines:"none"}},[n("ion-label",{attrs:{position:"stacked"}},[e._v("Table # To Reserve:")]),n("ion-input",{staticClass:"disabled",attrs:{disabled:""}},[e._v(e._s(e.pubTable.tableNum))])],1),n("ion-item",{attrs:{lines:"none"}},[n("ion-label",{attrs:{position:"stacked"}},[e._v("Name on Reservation: "),e.pub.ownerId===e.userId?n("ion-text",{attrs:{color:"danger"}},[e._v("*")]):e._e()],1),e.pub.ownerId!==e.userId?n("ion-input",{staticClass:"disabled",attrs:{type:"text",disabled:""}},[e._v(e._s(e.userDetails.firstName)+" "+e._s(e.userDetails.surname))]):n("ion-input-vue",{attrs:{autofocus:"true",type:"text",inputmode:"text",placeholder:"Please add name of person here"},model:{value:e.ownerReservedOnBehalfOf,callback:function(t){e.ownerReservedOnBehalfOf=t},expression:"ownerReservedOnBehalfOf"}})],1),e.pub.ownerId===e.userId?n("ion-item",{attrs:{lines:"none"}},[n("ion-label",{attrs:{position:"stacked"}},[e._v("Their Phone Number: "),n("ion-text",{attrs:{color:"danger"}},[e._v("*")])],1),n("ion-input-vue",{attrs:{inputmode:"tel",type:"tel",placeholder:"Please add number of person here"},model:{value:e.ownerReservedOnBehalfOfPhone,callback:function(t){e.ownerReservedOnBehalfOfPhone=t},expression:"ownerReservedOnBehalfOfPhone"}})],1):e._e(),n("ion-item",{attrs:{lines:"none"}},[n("ion-label",{attrs:{position:"stacked"}},[e._v("In Pub:")]),n("ion-input-vue",{staticClass:"disabled",attrs:{disabled:""}},[e._v(e._s(e.pub.pubName))])],1),n("ion-item",{attrs:{lines:"none"}},[n("ion-label",{attrs:{position:"stacked"}},[e._v("On date:")]),n("ion-input-vue",{staticClass:"disabled",attrs:{disabled:""}},[e._v("Today")])],1),n("p",{staticClass:"info-text"},[n("ion-text",{attrs:{color:"secondary"}},[e._v(" There is NO time limit on this reservation. Once Reserved it will stay reserved unless freed by the patron or publican. You can stay at table until closing. ")])],1),e.isAuthenticated?n("div",{staticClass:"ion-padding"},[n("ion-button",{staticClass:"ion-no-margin",attrs:{expand:"block",disabled:e.$v.$invalid&&e.pub.ownerId===e.userId,type:"submit"}},[e._v("Confirm Reservation")])],1):n("div",{staticClass:"ion-padding"},[n("ion-button",{staticClass:"ion-no-margin",attrs:{expand:"block"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Sign In To Reserve")])],1),n("div",{staticClass:"ion-padding"},[n("ion-button",{staticClass:"ion-no-margin",attrs:{expand:"block",color:"secondary"},on:{click:function(t){return t.preventDefault(),e.cancel(t)}}},[e._v("Cancel")])],1)],1)])],1)],1)],1)],1)},i=[],s=(n("ac1f"),n("5319"),n("5530")),r=n("ff79"),a=n("b5ae"),l=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ion-header",[n("ion-toolbar",[n("ion-title",[e._v("My Shout!")]),n("ion-buttons",{attrs:{slot:"end"},slot:"end"},[n("ion-button",{staticStyle:{"padding-right":"12px"},attrs:{color:"danger"},on:{click:e.modalClose}},[n("ion-icon",{attrs:{src:e.i.closeCircle}})],1)],1)],1)],1),n("ion-content",{staticClass:"ion-padding"},[n("ion-grid",[n("ion-row",[n("ion-col",{attrs:{size:"12"}},[n("sign-in-form",{attrs:{modalCloseParent:e.modalClose,isModal:!0}})],1)],1)],1),n("ion-grid",[n("ion-row",{staticClass:"ion-justify-content-center ion-padding-vertical"},[n("ion-router-link",{attrs:{href:"/#/signup"},on:{click:e.modalClose}},[e._v(" Not signed up? Sign up here ")])],1),n("ion-row",{staticClass:"ion-justify-content-center ion-padding-top"},[n("ion-router-link",{attrs:{href:"/#/forgotpassword"},on:{click:e.modalClose}},[e._v(" Forgot password? ")])],1)],1)],1)],1)},c=[],d=n("9ec9"),h={name:"modal",data:function(){return{i:r}},components:{SignInForm:d["a"]},methods:{modalClose:function(){this.$ionic.modalController.dismiss()}}},p=h,b=n("2877"),v=Object(b["a"])(p,u,c,!1,null,null,null),f=v.exports,m={name:"reserve-table",data:function(){return{ownerReservedOnBehalfOf:null,ownerReservedOnBehalfOfPhone:null,i:r}},validations:{ownerReservedOnBehalfOf:{required:a["required"]},ownerReservedOnBehalfOfPhone:{required:a["required"]}},computed:Object(s["a"])(Object(s["a"])({},Object(l["b"])("pubModule",["pubTable","pub"])),Object(l["b"])("userModule",["isAuthenticated","userDetails","userId"])),methods:{backToPubDetails:function(){this.$router.replace({name:"pub-details",params:{id:this.pub.key}})},cancel:function(){console.log("reserveTable.vue: cancel button clicked"),this.$router.replace({name:"pub-details",params:{id:this.pub.key}})},reserve:function(){var e=this;if(this.pub.ownerId!==this.userId)return this.pub.timeToArrivalLimitOn?this.$ionic.alertController.create({cssClass:"alert-cancel-res",header:"Confirm Reservation",message:"Please note that if you do not arrive to your table within "+this.pub.timeToArrivalLimitInMinutes+" minutes then the pub can cancel your reservation without notice.",buttons:[{text:"Back",role:"cancel",handler:function(){console.log("Reservation abandoned.")}},{text:"Confirm",handler:function(){e.reserveTable()}}]}).then((function(e){return e.present()})):this.$ionic.alertController.create({cssClass:"confirm-res",header:"Confirm Reservation",message:"Please note that the pub can cancel your reservation at any time without notice if they believe that you have not arrived (or will not arrive) within a reasonable time.",buttons:[{text:"Back",role:"cancel",handler:function(){console.log("Reservation abandoned.")}},{text:"Confirm",handler:function(){e.reserveTable()}}]}).then((function(e){return e.present()}));this.reserveTable()},reserveTable:function(){console.log("Reservation Confirmed"),console.log("reserveTable.vue: confirm reservation button clicked. submitting a new reservation"),this.pub.ownerId!==this.userId?(console.log("cancelling all existing reservations for punter"),this.$store.dispatch("reservationModule/cancelOtherReservationForPunterAndReserveNew",{userId:this.userId,tableToIgnoreId:this.pubTable.key,patronDetails:{patronName:this.userDetails.firstName+" "+this.userDetails.surname,patronPhone:this.userDetails.phone}})):(console.log("reserveTable.vue: creating reservation"),this.$store.dispatch("reservationModule/createReservation",{patronName:this.ownerReservedOnBehalfOf,patronPhone:this.ownerReservedOnBehalfOfPhone})),this.$router.replace({name:"pub-details",params:{id:this.pub.key}})},login:function(){return this.$ionic.modalController.create({component:f,componentProps:{parent:this,store:this.$store,router:this.$router,data:{},propsData:{title:"Sign In"}}}).then((function(e){return e.present()}))}},created:function(){this.userDetails&&""!==this.userDetails.email||this.$store.dispatch("userModule/fetchUserDetails"),this.pub.key&&this.pub.key===this.$route.query.pubId||(console.log("this.$route.query:",this.$route.query),console.log("no pub state - fetching from DB"),this.$store.dispatch("pubModule/fetchPubByPubId",this.$route.query.pubId)),this.pubTable&&this.pubTable.key===this.$route.params.id||(console.log("this.$route.params:",this.$route.params),console.log("no pubTable state - fetching from DB"),this.$store.dispatch("pubModule/fetchPubTable",this.$route.params.id))}},g=m,w=(n("b080"),Object(b["a"])(g,o,i,!1,null,"fe7eaa4a",null));t["default"]=w.exports},"6eed":function(e,t,n){},b080:function(e,t,n){"use strict";var o=n("6eed"),i=n.n(o);i.a}}]);
//# sourceMappingURL=chunk-80f70ad4.d50c0411.js.map