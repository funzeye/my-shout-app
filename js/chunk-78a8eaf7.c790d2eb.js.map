{"version":3,"sources":["webpack:///./src/components/TableCardBase.vue?608c","webpack:///./src/components/TableCardBase.vue?1ed0","webpack:///src/components/TableCardBase.vue","webpack:///./src/components/TableCardBase.vue?245c","webpack:///./src/components/TableCardBase.vue?8368","webpack:///./src/views/PubDetails.vue?d7de","webpack:///./src/components/TableCardReservation.vue?1a8f","webpack:///src/components/TableCardReservation.vue","webpack:///./src/components/TableCardReservation.vue?0227","webpack:///./src/components/TableCardReservation.vue","webpack:///src/views/PubDetails.vue","webpack:///./src/views/PubDetails.vue?dbff","webpack:///./src/views/PubDetails.vue","webpack:///./src/views/PubDetails.vue?0464"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","pubTable","pubFloorArea","tableNum","floor","seats","_t","staticRenderFns","props","component","pub","pubName","ownerId","userId","attrs","slot","on","editPub","i","settingsOutline","_e","style","photoUrl","staticStyle","_l","pt","key","floors","pubFloors","reservation","isCancelled","reservedBy","reservedByOwner","loggedInUserId","userIsOwner","patronDetails","patronName","patronPhone","_f","reservedAtDate","timeToArrivalLimit","Date","getTime","$event","preventDefault","cancelTableReservation","reserveTable","data","reservedButUnlocked","components","TableCardBase","computed","console","log","reservations","length","reservationsWithThisTableKey","methods","$store","dispatch","$router","push","$ionic","alertController","name","pubImg","TableCard","sortedTables","items","pubTables","sort","created","$route","params","id"],"mappings":"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","file":"js/chunk-78a8eaf7.c790d2eb.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCardBase.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCardBase.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ion-card',{staticClass:\"table-card\"},[_c('ion-card-header',[_c('ion-card-subtitle',[_vm._v(_vm._s(_vm.pubTable.pubFloorArea))]),_c('ion-card-title',[_vm._v(\"Table # \"+_vm._s(_vm.pubTable.tableNum))]),_c('ion-grid',[_c('ion-row',{staticClass:\"ion-justify-content-start ion-padding-top\"},[_c('div',[(_vm.pubTable.floor === 0)?_c('ion-text',[_vm._v(\"Ground Floor\")]):_c('ion-text',[_vm._v(\"Floor #: \"+_vm._s(_vm.pubTable.floor))])],1)]),_c('ion-row',[_c('div',[_c('ion-text',[_vm._v(\"No. of Seats: \"+_vm._s(_vm.pubTable.seats))])],1)])],1)],1),_c('ion-card-content',[_vm._t(\"table-card-other-details\"),_vm._t(\"table-card-action-button\"),_vm._t(\"table-card-action-button-info\")],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n      <ion-card class=\"table-card\">\n        <ion-card-header>\n          <ion-card-subtitle>{{ pubTable.pubFloorArea }}</ion-card-subtitle>\n          <ion-card-title>Table # {{ pubTable.tableNum }}</ion-card-title>\n          <ion-grid>\n            <ion-row class=\"ion-justify-content-start ion-padding-top\">\n                <div>\n                  <ion-text v-if=\"pubTable.floor === 0\">Ground Floor</ion-text>\n                  <ion-text v-else>Floor #: {{ pubTable.floor }}</ion-text>\n                </div>\n            </ion-row>\n            <ion-row>\n                <div>\n                  <ion-text>No. of Seats: {{ pubTable.seats }}</ion-text>\n                </div>\n            </ion-row>\n          </ion-grid>\n        </ion-card-header>\n        <ion-card-content>\n          <slot name=\"table-card-other-details\"></slot>\n          <slot name=\"table-card-action-button\"></slot>\n          <slot name=\"table-card-action-button-info\"></slot>\n        </ion-card-content>\n      </ion-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['i', 'pubTable', 'pubFloors']\n}\n</script>\n\n<style lang=\"css\">\n.info-text {\n  font-size: smaller;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCardBase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCardBase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableCardBase.vue?vue&type=template&id=5b7b2f5e&\"\nimport script from \"./TableCardBase.vue?vue&type=script&lang=js&\"\nexport * from \"./TableCardBase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableCardBase.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ion-page\"},[_c('ion-header',[_c('ion-toolbar',[_c('ion-title',[_vm._v(_vm._s(_vm.pub.pubName))]),(_vm.pub.ownerId === _vm.userId)?_c('ion-buttons',{attrs:{\"slot\":\"end\"},slot:\"end\"},[_c('ion-button',{on:{\"click\":_vm.editPub}},[_c('ion-icon',{attrs:{\"src\":_vm.i.settingsOutline}})],1)],1):_vm._e()],1)],1),_c('ion-content',[(_vm.pub.photoUrl)?_c('div',{staticClass:\"image-container\"},[_c('div',{staticClass:\"image\",style:('background-image:url(' + _vm.pub.photoUrl + ')')})]):_vm._e(),_c('ion-list',[_c('ion-grid',{staticStyle:{\"max-width\":\"1200px\"}},[_c('ion-row',_vm._l((_vm.sortedTables),function(pt){return _c('ion-col',{key:pt['.key'],attrs:{\"size\":\"12\",\"size-md\":\"6\",\"size-lg\":\"4\"}},[_c('table-card',{attrs:{\"i\":_vm.i,\"pubTable\":pt,\"loggedInUserId\":_vm.userId,\"pubFloors\":_vm.pub.floors,\"userIsOwner\":_vm.pub.ownerId === _vm.userId}})],1)}),1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table-card-base',{attrs:{\"i\":_vm.i,\"pubTable\":_vm.pubTable,\"pubFloors\":_vm.pubFloors}},[_c('template',{slot:\"table-card-other-details\"},[_c('div',[(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && !_vm.reservation.reservedByOwner && ((_vm.reservation.reservedBy === _vm.loggedInUserId) || _vm.userIsOwner))?_c('ion-item',{attrs:{\"lines\":\"none\"}},[_c('ion-label',{attrs:{\"position\":\"stacked\"}},[_vm._v(\"Reserved By Patron:\")]),(_vm.reservation.patronDetails)?_c('ion-text',[_vm._v(_vm._s(_vm.reservation.patronDetails.patronName))]):_vm._e()],1):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && !_vm.reservation.reservedByOwner && ((_vm.reservation.reservedBy === _vm.loggedInUserId) || _vm.userIsOwner))?_c('ion-item',{attrs:{\"lines\":\"none\"}},[_c('ion-label',{attrs:{\"position\":\"stacked\"}},[_vm._v(\"Phone Number:\")]),(_vm.reservation.patronDetails)?_c('ion-text',[_vm._v(_vm._s(_vm.reservation.patronDetails.patronPhone))]):_vm._e()],1):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && _vm.reservation.reservedByOwner && _vm.userIsOwner)?_c('ion-item',{attrs:{\"lines\":\"none\"}},[_c('ion-label',{attrs:{\"position\":\"stacked\"}},[_vm._v(\"Reserved By Publican For:\")]),_c('ion-text',[_vm._v(_vm._s(_vm.reservation.patronDetails.patronName))])],1):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && _vm.reservation.reservedByOwner && _vm.userIsOwner)?_c('ion-item',{attrs:{\"lines\":\"none\"}},[_c('ion-label',{attrs:{\"position\":\"stacked\"}},[_vm._v(\"Phone Number:\")]),_c('ion-text',[_vm._v(_vm._s(_vm.reservation.patronDetails.patronPhone))])],1):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy )?_c('ion-item',{attrs:{\"lines\":\"none\"}},[_c('ion-label',{attrs:{\"position\":\"stacked\"}},[_vm._v(\"Reserved At:\")]),_c('ion-text',[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.reservation.reservedAtDate)))])],1):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy )?_c('ion-item',{attrs:{\"lines\":\"none\"}},[_c('ion-label',{attrs:{\"position\":\"stacked\"}},[_vm._v(\"Reserved Until:\")]),_c('ion-text',[_vm._v(\"No Limit\")])],1):_vm._e()],1)]),((!_vm.reservation.isCancelled && _vm.reservation.reservedBy === _vm.loggedInUserId) ||\n      (!_vm.reservation.isCancelled && _vm.userIsOwner && _vm.reservation.reservedBy && _vm.reservation.timeToArrivalLimit && new Date(_vm.reservation.timeToArrivalLimit).getTime() < new Date().getTime()) ||\n      (!_vm.reservation.isCancelled && _vm.userIsOwner && _vm.reservation.reservedBy && !_vm.reservation.timeToArrivalLimit))?_c('template',{slot:\"table-card-action-button\"},[_c('div',{staticClass:\"ion-padding-vertical\"},[_c('ion-button',{attrs:{\"expand\":\"block\",\"color\":\"danger\",\"size\":\"default\",\"fill\":\"outline\"},on:{\"click\":function($event){$event.preventDefault();return _vm.cancelTableReservation($event)}}},[_vm._v(\"Cancel\")])],1)]):(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && _vm.reservation.reservedBy !== _vm.loggedInUserId)?_c('template',{slot:\"table-card-action-button\"},[_c('div',{staticClass:\"ion-padding-vertical\"},[_c('ion-button',{attrs:{\"expand\":\"block\",\"size\":\"default\",\"fill\":\"outline\",\"color\":\"success\",\"disabled\":\"\"}},[_vm._v(\"Reserved\")])],1)]):_c('template',{slot:\"table-card-action-button\"},[_c('div',{staticClass:\"ion-padding-vertical\"},[_c('ion-button',{attrs:{\"slot\":\"start\",\"expand\":\"block\",\"size\":\"default\",\"fill\":\"outline\"},on:{\"click\":function($event){$event.preventDefault();return _vm.reserveTable($event)}},slot:\"start\"},[_vm._v(\"Reserve\")])],1)]),_c('template',{slot:\"table-card-action-button-info\"},[(!_vm.reservation.isCancelled && !_vm.reservation.reservedBy  && !_vm.userIsOwner)?_c('div',{staticClass:\"info-text ion-text-center ion-text-sm-start\"},[_vm._v(\" Clicking 'Reserve' will reserve this table and cancel any other active reservations you currently have \")]):_vm._e(),(!_vm.reservation.isCancelled && !_vm.reservation.reservedBy && _vm.userIsOwner)?_c('div',{staticClass:\"info-text ion-text-center ion-text-sm-start\"},[_vm._v(\" Clicking 'Reserve' will reserve this table on behalf of your customer \")]):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy === _vm.loggedInUserId)?_c('div',{staticClass:\"info-text ion-text-center ion-text-sm-start\"},[_vm._v(\" Clicking 'Cancel' will cancel this reservation and allow it to be reserved by others \")]):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && _vm.reservation.reservedBy !== _vm.loggedInUserId  && !_vm.userIsOwner)?_c('div',{staticClass:\"info-text ion-text-center ion-text-sm-start\"},[_vm._v(\" Table currently unavailable. \")]):_vm._e(),(!_vm.reservation.isCancelled && _vm.reservation.reservedBy && _vm.reservation.reservedBy !== _vm.loggedInUserId && _vm.userIsOwner)?_c('div',{staticClass:\"info-text ion-text-center ion-text-sm-start\"},[_vm._v(\" Table currently unavailable. If 'time to arrival' limit has passed you can 'Cancel' this booking to free up the table for others. Otherwise you must wait. \")]):_vm._e()])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <table-card-base :i=\"i\" :pubTable=\"pubTable\" :pubFloors=\"pubFloors\">\n      <template slot=\"table-card-other-details\">\n        <div>\n          <ion-item lines=\"none\" v-if=\"!reservation.isCancelled && reservation.reservedBy && !reservation.reservedByOwner && ((reservation.reservedBy === loggedInUserId) || userIsOwner)\">\n            <ion-label position=\"stacked\">Reserved By Patron:</ion-label>\n            <ion-text v-if=\"reservation.patronDetails\">{{ reservation.patronDetails.patronName }}</ion-text>\n          </ion-item>\n          <ion-item  lines=\"none\" v-if=\"!reservation.isCancelled && reservation.reservedBy && !reservation.reservedByOwner && ((reservation.reservedBy === loggedInUserId) || userIsOwner)\">\n            <ion-label position=\"stacked\">Phone Number:</ion-label>\n            <ion-text v-if=\"reservation.patronDetails\">{{ reservation.patronDetails.patronPhone }}</ion-text>\n          </ion-item>\n          <ion-item  lines=\"none\" v-if=\"!reservation.isCancelled && reservation.reservedBy && reservation.reservedByOwner && userIsOwner\">\n            <ion-label position=\"stacked\">Reserved By Publican For:</ion-label>\n            <ion-text>{{ reservation.patronDetails.patronName }}</ion-text>\n          </ion-item>\n          <ion-item  lines=\"none\" v-if=\"!reservation.isCancelled && reservation.reservedBy && reservation.reservedByOwner && userIsOwner\">\n            <ion-label position=\"stacked\">Phone Number:</ion-label>\n            <ion-text>{{ reservation.patronDetails.patronPhone }}</ion-text>\n          </ion-item>\n          <ion-item  lines=\"none\" v-if=\"!reservation.isCancelled && reservation.reservedBy \">\n            <ion-label position=\"stacked\">Reserved At:</ion-label>\n            <ion-text>{{ reservation.reservedAtDate | formatDate }}</ion-text>\n          </ion-item>\n          <ion-item  lines=\"none\" v-if=\"!reservation.isCancelled && reservation.reservedBy \">\n            <ion-label position=\"stacked\">Reserved Until:</ion-label>\n            <ion-text>No Limit</ion-text>\n          </ion-item>\n        </div>\n      </template>\n      <template v-if=\"(!reservation.isCancelled && reservation.reservedBy === loggedInUserId) ||\n        (!reservation.isCancelled && userIsOwner && reservation.reservedBy && reservation.timeToArrivalLimit && new Date(reservation.timeToArrivalLimit).getTime() < new Date().getTime()) ||\n        (!reservation.isCancelled && userIsOwner && reservation.reservedBy && !reservation.timeToArrivalLimit)\"\n        slot=\"table-card-action-button\">\n        <div  class=\"ion-padding-vertical\">\n          <ion-button expand=\"block\" color=\"danger\" size=\"default\" fill=\"outline\" @click.prevent=\"cancelTableReservation\">Cancel</ion-button>\n        </div>\n      </template>\n      <template v-else-if=\"!reservation.isCancelled && reservation.reservedBy && reservation.reservedBy !== loggedInUserId\" slot=\"table-card-action-button\">\n        <div class=\"ion-padding-vertical\">\n          <ion-button expand=\"block\" size=\"default\" fill=\"outline\" color=\"success\" disabled>Reserved</ion-button>\n        </div>\n      </template>\n      <template v-else slot=\"table-card-action-button\">\n        <div class=\"ion-padding-vertical\">\n          <ion-button slot=\"start\" expand=\"block\" size=\"default\" fill=\"outline\" @click.prevent=\"reserveTable\">Reserve</ion-button>\n        </div>\n      </template>\n      <template slot=\"table-card-action-button-info\">\n        <div class=\"info-text ion-text-center ion-text-sm-start\" v-if=\"!reservation.isCancelled && !reservation.reservedBy  && !userIsOwner\">\n          Clicking 'Reserve' will reserve this table and cancel any other active reservations you currently have\n        </div>\n        <div class=\"info-text ion-text-center ion-text-sm-start\" v-if=\"!reservation.isCancelled && !reservation.reservedBy && userIsOwner\">\n          Clicking 'Reserve' will reserve this table on behalf of your customer\n        </div>\n        <div class=\"info-text ion-text-center ion-text-sm-start\" v-if=\"!reservation.isCancelled && reservation.reservedBy === loggedInUserId\">\n          Clicking 'Cancel' will cancel this reservation and allow it to be reserved by others\n        </div>\n        <div class=\"info-text ion-text-center ion-text-sm-start\" v-if=\"!reservation.isCancelled && reservation.reservedBy && reservation.reservedBy !== loggedInUserId  && !userIsOwner\">\n          Table currently unavailable.\n        </div>\n        <div class=\"info-text ion-text-center ion-text-sm-start\" v-if=\"!reservation.isCancelled && reservation.reservedBy && reservation.reservedBy !== loggedInUserId && userIsOwner\">\n          Table currently unavailable. If 'time to arrival' limit has passed you can 'Cancel' this booking to free up the table for others. Otherwise you must wait.\n        </div>\n      </template>\n  </table-card-base>\n</template>\n\n<script>\nimport TableCardBase from '../components/TableCardBase.vue'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  props: ['i', 'pubTable', 'pubFloors', 'loggedInUserId', 'userIsOwner'],\n  data () {\n    return {\n      reservedButUnlocked () {\n        // 1 check that logged in user is onwer of pub\n        if (this.userIsOwner) {\n          // 2 check that reservation exists for this table\n          if (this.reservation.reservedBy !== null && this.reservation.reservedBy !== '') {\n            // 3 check arrival limit has passed\n            return this.reservation.timeToArrivalLimit > new Date()\n          }\n        }\n        return false\n      }\n    }\n  },\n  components: {\n    TableCardBase\n  },\n  computed: {\n    // isReserved () {\n    //  const reservations = this.$store.getters.reservations\n    //  return reservations.some(item => item.tableId === this.pubTable.key)\n    // },\n    ...mapGetters('reservationModule', [\n      'allTodaysReservationsForPub'\n    ]),\n    reservation () {\n      console.log('checking if reservation exists for current table #', this.pubTable.tableNum)\n      const reservations = this.allTodaysReservationsForPub\n      if (reservations && reservations.length > 0) {\n        const reservationsWithThisTableKey = reservations.filter(item => item.table.tableId === this.pubTable.key)\n        if (reservationsWithThisTableKey.length === 1) {\n          return reservationsWithThisTableKey[0]\n        } else if (reservationsWithThisTableKey.length > 1) {\n          console.log('Error: 2 active reservations found for same table')\n        }\n      }\n      return {\n        reservedBy: '',\n        patronDetails: {\n          patronName: '',\n          patronPhone: ''\n        }\n      }\n    }\n  },\n  methods: {\n    reserveTable () {\n      this.$store.dispatch('userModule/fetchUserDetails')\n      this.$store.dispatch('pubModule/setSelectedPubTable', this.pubTable)\n      this.$router.push({ name: 'reserve-table', params: { id: this.pubTable.key }, query: { pubId: this.pubTable.pubId } })\n    },\n    cancelTableReservation () {\n      console.log('cancelling reservation...')\n      return this.$ionic.alertController\n        .create({\n          cssClass: 'alert-cancel-res',\n          header: 'Cancel Reservation',\n          // subHeader: 'Subtitle',\n          message: 'Are you sure you wish to cancel this reservation?',\n          buttons: [\n            {\n              text: 'Back',\n              role: 'cancel',\n              // cssClass: 'secondary',\n              handler: () => {\n                console.log('Cancellation abandoned.')\n              }\n            },\n            {\n              text: 'Confirm',\n              handler: () => {\n                console.log('Cancellation Confirmed')\n                this.$store.dispatch('reservationModule/cancelReservationForCurrentlySelectedTable', this.reservation.key)\n              }\n            }\n          ]\n        })\n        .then(a => a.present())\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCardReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCardReservation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableCardReservation.vue?vue&type=template&id=6a851e41&\"\nimport script from \"./TableCardReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./TableCardReservation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"ion-page\">\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>{{ pub.pubName }}</ion-title>\n        <ion-buttons v-if=\"pub.ownerId === userId\" slot=\"end\">\n          <ion-button @click=\"editPub\">\n            <ion-icon :src=\"i.settingsOutline\"></ion-icon>\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n    </ion-header>\n    <ion-content>\n      <div v-if=\"pub.photoUrl\" class=\"image-container\">\n        <div class=\"image\" :style=\"'background-image:url(' + pub.photoUrl + ')'\"></div>\n      </div>\n      <ion-list>\n        <ion-grid style=\"max-width:1200px;\">\n          <ion-row>\n            <ion-col size=\"12\" size-md=\"6\" size-lg=\"4\" v-for=\"pt in sortedTables\" :key=\"pt['.key']\">\n                <table-card :i=\"i\" :pubTable=\"pt\" :loggedInUserId=\"userId\" :pubFloors=\"pub.floors\"\n                :userIsOwner=\"pub.ownerId === userId\"/>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-list>\n    </ion-content>\n  </div>\n</template>\n\n<script>\nimport TableCard from '../components/TableCardReservation.vue'\nimport * as allIcons from 'ionicons/icons'\nimport { mapGetters } from 'vuex'\n\nexport default {\n\n  name: 'pub-details',\n  data () {\n    return {\n      i: allIcons,\n      pubImg: null\n    }\n  },\n  components: {\n    TableCard\n  },\n  computed: {\n    ...mapGetters('pubModule', [\n      'pubTables',\n      'pub'\n    ]),\n    ...mapGetters('userModule', [\n      'userId'\n    ]),\n    sortedTables () {\n      var items = this.pubTables\n      return items.sort((a, b) => a.tableNum - b.tableNum)\n    }\n  },\n  created () {\n    console.log(this.$route)\n    console.log('current route param id ', this.$route.params.id)\n    if (!this.pub || this.pub.key !== this.$route.params.id) {\n      console.log('fecthing pub linked to pub id of: ', this.$route.params.id)\n      this.$store.dispatch('pubModule/fetchPubByPubId', this.$route.params.id)\n    } else {\n      console.log('current pub key: ', this.pub.key)\n      console.log('current pub in state matches current pub on screen - not retreiving data from db')\n    }\n  },\n  methods: {\n    editPub () {\n      this.$router.push({ name: 'edit-pub', params: { id: this.pub.key } })\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.image-container{\n  height: 40vh;\n  max-height: none;\n  position: relative;\n  overflow: hidden;\n  color: #fff;\n}\n.image{\n  background-position: 50%;\n  background-size: cover;\n  background-attachment: scroll;\n  background-repeat: no-repeat;\n  z-index: 0;\n  display: block;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PubDetails.vue?vue&type=template&id=b73ad608&scoped=true&\"\nimport script from \"./PubDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./PubDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PubDetails.vue?vue&type=style&index=0&id=b73ad608&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b73ad608\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubDetails.vue?vue&type=style&index=0&id=b73ad608&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubDetails.vue?vue&type=style&index=0&id=b73ad608&lang=scss&scoped=true&\""],"sourceRoot":""}